# üí¨ RPC Dart Chat

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —á–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–µ–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ **RPC Dart Router** —Å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º **HTTP/2 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º**.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üöÄ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **HTTP/2 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π gRPC-style –ø—Ä–æ—Ç–æ–∫–æ–ª
- **–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –æ–¥–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- **–°–∂–∞—Ç–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤** - —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

### üí¨ –§—É–Ω–∫—Ü–∏–∏ —á–∞—Ç–∞
- **–ü—É–±–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –ª–∏—á–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—á–∞—Ç–∞–Ω–∏—è** - –≤–∏–¥–Ω–æ –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø–µ—á–∞—Ç–∞–µ—Ç
- **–†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è** - —ç–º–æ–¥–∑–∏ —Ä–µ–∞–∫—Ü–∏–∏ 
- **–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –∫—Ç–æ –æ–Ω–ª–∞–π–Ω

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** —Å exponential backoff
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Material Design 3** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ä–æ—É—Ç–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞

```bash
# HTTP/2 —Ä–æ—É—Ç–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
dart run rpc_dart_transports:rpc_dart_router --stats

# WebSocket —Ä–æ—É—Ç–µ—Ä (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
dart run rpc_dart_transports:rpc_dart_router -t websocket -p 11111 --stats

# –° –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
dart run rpc_dart_transports:rpc_dart_router -v --log-level debug
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —á–∞—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
cd rpc_dart_chat
flutter run
```

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: `http://localhost:11112`
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —á–∞—Ç—É"

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–æ—É—Ç–µ—Ä–∞
–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç–µ—Ä —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **–æ–¥–Ω–∏–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º** - —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- üéØ **–ü—Ä–æ—Å—Ç–æ—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –æ–¥–∏–Ω –ø–æ—Ä—Ç, –æ–¥–∏–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- üîí **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞–º–∏  
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- üõ†Ô∏è **–õ–µ–≥–∫–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏** - –ø—Ä–æ—â–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç-–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω
- **HTTP/2** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π gRPC-style —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **WebSocket** - —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- **–ì–æ—Ä—è—á–∞—è –∑–∞–º–µ–Ω–∞** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–æ—É—Ç–µ—Ä–∞
–†–æ—É—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```
üìä === –°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–û–£–¢–ï–†–ê ===
‚è±Ô∏è  –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 5–º 23—Å
üîó –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: 3
üìà –í—Å–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: 7
üë• –ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤: 3
üì® –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 142
‚ùå –û—à–∏–±–æ–∫: 0
üöÄ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã:
   ‚Ä¢ Http2: 3 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
================================
```

## üîß –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ü—Ä–æ–¥–∞–∫—à–Ω HTTP/2 —Ä–æ—É—Ç–µ—Ä
dart run rpc_dart_transports:rpc_dart_router \
  --host 0.0.0.0 \
  --port 443 \
  --transport http2 \
  --client-timeout 300 \
  --log-level info

# –ü—Ä–æ–¥–∞–∫—à–Ω WebSocket —Ä–æ—É—Ç–µ—Ä (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
dart run rpc_dart_transports:rpc_dart_router \
  --host 0.0.0.0 \
  --port 80 \
  --transport websocket \
  --client-timeout 300 \
  --log-level info
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —á–∞—Ç** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏  
- **–ò–≥—Ä–æ–≤–æ–π —á–∞—Ç** - –æ–±—â–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```dart
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ—É—Ç–µ—Ä—É
final chatService = ChatService();
await chatService.connect(
  serverUrl: 'http://your-server.com:11112',
  username: '–ò–º—è–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
);

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
await chatService.sendMessage('–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!');

// –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
await chatService.sendPrivateMessage(targetUserId, '–õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ');
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
for i in {1..10}; do
  flutter run --dart-define=USER_ID=user$i &
done
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Latency**: < 10ms –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Throughput**: > 1000 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫—É–Ω–¥—É
- **Memory**: < 50MB –Ω–∞ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **CPU**: < 5% –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

## üîç –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
dart run rpc_dart_transports:rpc_dart_router --log-level debug -v
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–æ—É—Ç–µ—Ä–∞
curl http://localhost:11112/
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [RPC Dart Framework](../rpc_dart/)
- [Router Documentation](../rpc_dart_transports/)
- [Transport Layer Guide](../docs/transports.md)

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ LGPL-3.0 - —Å–º. —Ñ–∞–π–ª [LICENSE](../LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
